#!/system/bin/sh

# ========================================
# EXTREME PERFORMANCE BOOST SCRIPT
# For Non-Rooted Android Devices
# Direct Terminal Execution (NO ADB)
# Force Unlock Maximum Performance
# ========================================

echo "========================================="
echo "EXTREME ANDROID PERFORMANCE UNLEASHED"
echo "Starting Maximum Force Optimization..."
echo "========================================="

# ===== DISABLE ANIMATIONS (INSTANT UI) =====
echo "[1/15] Disabling all animations..."
settings put global window_animation_scale 0
settings put global transition_animation_scale 0
settings put global animator_duration_scale 0

# ===== GPU & GRAPHICS MAXIMUM PERFORMANCE =====
echo "[2/15] Forcing GPU maximum performance..."
settings put system debug.egl.hw 1
settings put system debug.sf.hw 1
settings put system debug.composition.type gpu
settings put system debug.performance.tuning 1
settings put system video.accelerate.hw 1
settings put system hwui.render_dirty_regions false
settings put system hwui.disable_vsync true
settings put system debug.enabletr true
settings put system debug.qctwa.statusbar 1
settings put system debug.qctwa.preservebuf 1
settings put system debug.overlayui.enable 1
settings put system debug.qc.hardware true
settings put system ro.opengles.version 196610
settings put system graphics.gpu.profiler.support true

# ===== SURFACE FLINGER OPTIMIZATION =====
echo "[3/15] Optimizing SurfaceFlinger settings..."
settings put system ro.surface_flinger.max_frame_buffer_acquired_buffers 4
settings put system ro.surface_flinger.game_default_frame_rate_override 120
settings put system ro.surface_flinger.set_idle_timer_ms 0
settings put system ro.surface_flinger.set_touch_timer_ms 0
settings put system ro.surface_flinger.use_smart_90_for_video 0
settings put system ro.surface_flinger.protected_contents true
settings put system ro.surface_flinger.has_wide_color_display true
settings put system ro.surface_flinger.primary_display_orientation 0

# ===== MEDIATEK SPECIFIC (IF APPLICABLE) =====
echo "[4/15] Applying MediaTek optimizations..."
settings put system ro.gfx.driver.0 com.mediatek.mt6878.gamedriver
settings put system ro.mtk_hifiaudio_support 1
settings put system vendor.ims.eims.pdn.info ,ims_0_1602,ims_1_1803,

# ===== ARM GRALLOC PERFORMANCE =====
echo "[5/15] Configuring ARM Gralloc settings..."
settings put system ro.vendor.arm.gralloc.no_afbc_usage_mask 0x1200000000000000
settings put system ro.vendor.arm.gralloc.no_afbc_usage_flags 0x2000000000000000
settings put system ro.vendor.arm.gralloc.afrc_luma_usage_mask 0x70000000
settings put system ro.vendor.arm.gralloc.afrc_rgba_usage_mask 0x70000000
settings put system ro.vendor.arm.gralloc.afrc_luma_usage_flags 0x50000000,0x60000000,0x40000000
settings put system ro.vendor.arm.gralloc.afrc_rgba_usage_flags 0x50000000,0x60000000,0x40000000
settings put system ro.vendor.arm.gralloc.afrc_chroma_usage_mask 0x180000000000000
settings put system ro.vendor.arm.gralloc.afrc_chroma_usage_flags 0x100000000000000,0x80000000000000,0x180000000000000
settings put system ro.vendor.arm.gralloc.shared_access_usage_mask 0x50000000
settings put system ro.vendor.arm.gralloc.shared_access_usage_flags 0x10000000
settings put system ro.vendor.arm.gralloc.force_back_buffer_usage_mask 0x40000000000000
settings put system ro.vendor.arm.gralloc.force_back_buffer_usage_flags 0x40000000000000

# ===== EGL CONFIGURATIONS (MAX PERFORMANCE) =====
echo "[6/15] Setting EGL max configurations..."
settings put system ro.vendor.arm.egl.configs.yvu420.recordable true
settings put system ro.vendor.arm.egl.configs.r5_g6_b5_a0_16bit_fixed.hal_format 0x4
settings put system ro.vendor.arm.egl.configs.r5_g6_b5_a0_16bit_fixed.recordable false
settings put system ro.vendor.arm.egl.configs.r5_g6_b5_a0_16bit_fixed.framebuffer_target false
settings put system ro.vendor.arm.egl.configs.r8_g8_b8_a0_24bit_fixed.hal_format 0x2
settings put system ro.vendor.arm.egl.configs.r8_g8_b8_a0_24bit_fixed.recordable false
settings put system ro.vendor.arm.egl.configs.r8_g8_b8_a0_24bit_fixed.framebuffer_target false
settings put system ro.vendor.arm.egl.configs.r8_g8_b8_a0_32bit_fixed.hal_format 0x2
settings put system ro.vendor.arm.egl.configs.r8_g8_b8_a0_32bit_fixed.recordable false
settings put system ro.vendor.arm.egl.configs.r8_g8_b8_a0_32bit_fixed.framebuffer_target false
settings put system ro.vendor.arm.egl.configs.r8_g8_b8_a8_32bit_fixed.hal_format 0x1
settings put system ro.vendor.arm.egl.configs.r8_g8_b8_a8_32bit_fixed.recordable true
settings put system ro.vendor.arm.egl.configs.r8_g8_b8_a8_32bit_fixed.framebuffer_target false
settings put system ro.vendor.arm.egl.configs.r10_g10_b10_a2_32bit_fixed.hal_format 0x2b
settings put system ro.vendor.arm.egl.configs.r10_g10_b10_a2_32bit_fixed.recordable false
settings put system ro.vendor.arm.egl.configs.r10_g10_b10_a2_32bit_fixed.framebuffer_target false
settings put system ro.vendor.arm.egl.configs.r16_g16_b16_a16_64bit_float.hal_format 0x16
settings put system ro.vendor.arm.egl.configs.r16_g16_b16_a16_64bit_float.recordable false
settings put system ro.vendor.arm.egl.configs.r16_g16_b16_a16_64bit_float.framebuffer_target false
settings put system ro.vendor.arm.egl.configs.r8_g8_b8_a0_24bit_yuv_special.hal_format 0x23
settings put system ro.vendor.arm.egl.configs.r8_g8_b8_a0_24bit_yuv_special.framebuffer_target false

# ===== LOW MEMORY KILLER (AGGRESSIVE) =====
echo "[7/15] Configuring low memory killer..."
settings put system ro.lmk.swap_util_max 90
settings put system ro.lmk.kill_timeout_ms 100
settings put system ro.lmk.thrashing_limit 30
settings put system ro.lmk.psi_complete_stall_ms 150
settings put system ro.lmk.thrashing_limit_decay 50
settings put system ro.lmk.swap_free_low_percentage 20

# ===== MEMORY & VM TWEAKS =====
echo "[8/15] Optimizing memory management..."
settings put system dalvik.vm.heapsize 512m
settings put system dalvik.vm.heapgrowthlimit 256m
settings put system dalvik.vm.heapstartsize 16m
settings put system dalvik.vm.heapmaxfree 8m
settings put system dalvik.vm.heapminfree 512k
settings put system dalvik.vm.heaptargetutilization 0.75
settings put system persist.sys.purgeable_assets 1
settings put system vm.swappiness 100
settings put system vm.vfs_cache_pressure 50
settings put system vm.dirty_ratio 20
settings put system vm.dirty_background_ratio 5
settings put system ro.config.per_app_memcg false

# ===== CPU & SCHEDULER OPTIMIZATION =====
echo "[9/15] Tuning CPU scheduler..."
settings put system kernel.sched_latency_ns 10000000
settings put system kernel.sched_wakeup_granularity_ns 2000000
settings put system kernel.sched_min_granularity_ns 1000000
settings put system kernel.sched_migration_cost 500000
settings put system kernel.sched_nr_migrate 32
settings put system ro.config.hw_fast_dormancy 1
settings put system ro.ril.disable.power.collapse 0

# ===== TOUCH & INPUT RESPONSIVENESS =====
echo "[10/15] Maximizing touch responsiveness..."
settings put system touch.pressure.scale 0.001
settings put system touch.size.scale 1
settings put system min_pointer_duration 0
settings put system touch.deviceType touchScreen
settings put system windowsmgr.max_events_per_sec 150
settings put system mot.proximity.delay 150
settings put system ring.delay 0
settings put system ro.telephony.call_ring.delay 0

# ===== DISABLE UNNECESSARY FEATURES =====
echo "[11/15] Disabling battery-draining features..."
settings put system haptic_feedback_enabled 0
settings put system vibrate_on_touch 0
settings put system sound_effects_enabled 0
settings put system accelerometer_rotation 0
settings put system adaptive_sleep 0
settings put global low_power 0
settings put global app_standby_enabled 0
settings put global wifi_scan_always_enabled 0
settings put global network_recommendations_enabled 0
settings put global bluetooth_on 0

# ===== NETWORK OPTIMIZATION =====
echo "[12/15] Optimizing network settings..."
settings put global mobile_data 1
settings put global data_roaming 0
settings put global wifi_sleep_policy 2
settings put system ro.ril.enable.amr.wideband 1

# ===== DISABLE LOGGING & DEBUG =====
echo "[13/15] Disabling system logging..."
settings put global logcat.live disable
settings put system debuggable 0
settings put system debug.atrace.tags.enableflags 0
settings put system profiler.debugmonitor false
settings put system profiler.launch false
settings put system profiler.hung.dumpdobugreport false
settings put system debug.egl.profiler 0

# ===== AUDIO & MEDIA OPTIMIZATION =====
echo "[14/15] Configuring audio settings..."
settings put system audio.offload.disable 0
settings put system persist.audio.fluence.voicecall true
settings put system persist.audio.fluence.voicerec true
settings put system persist.audio.fluence.speaker true
settings put system ro.qc.sdk.audio.fluencetype fluence
settings put system cam.fps.mode 1
settings put system persist.camera.cpp.duplication 1
settings put system persist.camera.hal.debug.mask 0

# ===== ACTIVITY MANAGER OPTIMIZATION =====
echo "[15/15] Final activity manager tuning..."
settings put global activity_manager_constants max_cached_processes=64
settings put global activity_manager_constants background_settle_time=30000
settings put global sem_enhanced_cpu_responsiveness 1
settings put global development_settings_enabled 1
settings put global stay_on_while_plugged_in 3

# ===== DISPLAY SETTINGS =====
settings put system screen_off_timeout 300000
settings put system screen_brightness_mode 0
settings put system screen_brightness 200
settings put system auto_time 1
settings put system auto_time_zone 1

# ===== VENDOR & PERSIST SETTINGS =====
settings put system ro.vendor.md_mims_support 2
settings put system ro.vendor.md_auto_setup_ims 1
settings put system persist.vendor.ims_support 1
settings put system ro.vendor.jpeg_decode_sw_opt 1
settings put system persist.vendor.log.tel_log_ctrl 1
settings put system persist.vendor.md_c2k_cap_dep_check 0

# ===== ADDITIONAL PERFORMANCE PROPS =====
settings put system ro.sys.fw.dex2oat_thread_count 8
settings put system ro.config.nocheckin 1
settings put system ro.HOME_APP_ADJ 1
settings put system pm.sleep_mode 1
settings put system ro.ril.sensor.sleep.control 1
settings put system power_supply.wakeup enable

echo "========================================="
echo "✓ MAXIMUM PERFORMANCE UNLOCKED!"
echo "========================================="
echo ""
echo "Performance optimizations applied:"
echo "• Animations: DISABLED"
echo "• GPU: MAX PERFORMANCE"
echo "• CPU: OPTIMIZED"
echo "• RAM: AGGRESSIVE MANAGEMENT"
echo "• Touch: MAXIMUM RESPONSIVENESS"
echo "• Graphics: HIGHEST SETTINGS"
echo ""
echo "RECOMMENDATION: REBOOT YOUR DEVICE NOW"
echo "========================================="
echo ""
echo "To reboot automatically, uncomment line below:"
echo "# reboot"
